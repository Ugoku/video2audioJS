<!DOCTYPE html5>
<meta charset="UTF-8">
<title>workingtest</title>
<body>
<button onclick="go();" disabled>Go!</button>
<script>
function read(file){
document.querySelector("button").setAttribute("disabled","");
var reader=new FileReader();
reader.addEventListener("load",function(){document.querySelector("button").removeAttribute("disabled");});
reader.readAsArrayBuffer(file);
}
function go(buffer){
  var audioContext = new(window.AudioContext || window.webkitAudioContext)();
  var offlineAudioContext = new OfflineAudioContext(2, 44100 * 100, 44100);
  var soundSource = offlineAudioContext.createBufferSource();
  var videoFileAsBuffer = buffer; // arraybuffer
  audioContext.decodeAudioData(videoFileAsBuffer).then(function (decodedAudioData) {
    myBuffer = decodedAudioData;
    soundSource.buffer = myBuffer;
    soundSource.connect(offlineAudioContext.destination);
    soundSource.start();
    offlineAudioContext.startRendering().then(function (renderedBuffer) {
      console.log(renderedBuffer); // outputs audiobuffer
      var song = audioContext.createBufferSource();
      song.buffer = renderedBuffer;
      song.connect(audioContext.destination);
      song.start();
    }).catch(function (err) {
      console.log('Rendering failed: ' + err);
    });
  });
}
</script>
<input type="file" onchange="read(this.files[0]);"/>
</body>
